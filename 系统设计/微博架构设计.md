### 架构演进
1. LAMP+MPSS --> 模块化 --> 平台化(先有服务，再有接口，最有才有应用)
   LAMP: linux+apache+mysql+php/python
   MPSS: multi-port single server; 就是一台服务器上部署好多app。
  
2. 遇到的问题及方案： 推消息模式： 明星发消息后，推送给关注他的用户； 
   2.1 投递模式优化
      我们把用户分成有效和无效之后，我们把他们做一下区分，比如说当天登陆过的人我们分成有效用户的话，
      只需要发送给当天登陆过的粉丝，这样压力马上就减轻了，另外投递的延迟也减小了。
   2.2 数据拆分：
      优先按时间维度拆分 + 多级索引加快跨表访问
      内容使用key-value方式存储
      索引由于有分页，使用二级索引，记录索引的位置
   2.3 异步处理
      发表微博是一个很重的行为，要入库，统计索引，推消息等。用异步来
      
3. 高性能架构 （易于扩展、低延迟、高可用和异地分布）
   3.1 分布式
      
   
   
###明星发微博（异步推拉结合）
1. 明星发微博 ，系统将微博写入消息队列； ——生产者          
2. 消息队列消费者从 微博推送给所有当前在线粉丝的订阅列表中。——消费者
3. 非在线粉丝登录后再根据关注列表拉取微博订阅列表。

服务端的连接就是高并发长连接服务，