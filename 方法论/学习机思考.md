### 当前学习机让人难受的点：
1. prd稿问题 (1. 细节没有，经常就和S2一样，后续实现后又说场景不一样，让重新改。 拍批诊断说和X1一样，提测后又说不能一样，必须过滤年级学期）
2. 测试环境问题，测试环境不通，无法使用测试环境自测。  mock数据，但是数据量经常太大，不太好maock。
3. 流程问题，从prd -> 研发 -> 测试 -> 上线。 产品经常在测试过程中发现流程不合理点，又让改代码，花费时间。 经常倒排需求，时间不足。
4. 上游业务hack情况。 比如视频课，内容侧本身就很混乱，我们前期没有很好的抽象封装，导致现在业务上各种hack，经常留坑
5. 业务本身设计不合理，导致迭代困难。比如加错题本，exercise和photo-check都有加错题本，没有收敛。错题本本身db设计不合理，导致维护困难。
6. 团队划分不合理， 按业务去划分了X1和S2，但在实现上又按照领域去划分，不同人维护不通的领域。但业务需求经常要跨领域，导致合作冲突，或者突然告诉要开发。
7. 统一api接口到同一个服务上， 方便做限流，鉴权，降级，ab实验等。


### 设计问题有哪些：
>>> 学习机难以维护，就是当初设计时没设计好， 这个系统本身不复杂， 但因为设计的问题，导致难以维护。 设计第一，代码倒是其次的。
1. 错题本服务： db设计不合理(练习记录和错题详情记录在一起了)， 服务不收敛(加错题时，大量逻辑在其他服务里，需要关注错题的逻辑实现)
2. 拍批服务： 拍批作为一种基础能力，还是作为一种上层功能定位不清晰， 导致逻辑复杂，难以复用。
3. 作业服务： 作为上层服务，关注了太多底层业务的实现,
4. 练习记录： 作为一个基础服务(类似电商中的订单，串联起整个业务)，丢失了一些信息，对多条件的查询支持不好(没有记录来源，关联关系)比如作业不想依赖拍批服务。 只想依赖练习记录
5. 练习服务： 目录，出题 等都是两套(math一套)。无法统一演进。
6. 视频课服务： 由于内容侧的原因，导致服务端各种hack逻辑， 无法很好的处理。
7. 首页面板： 目前是写死的，不能灵活变动。  灵活的方式是配置下发。跳转也下发。
8. ai服务：
9. 知识图谱服务：领域不闭环，导致每个涉及到知识图谱相关需求的同学，都要去了解下知识图谱逻辑。

### 学习机的特点：
1. 数据结构很大， 拍批结果很大。保存db时有问题
2. 题目结构很大， 几十个字段
3. rpc调用很频发， 各种调用内容，研究组接口
4. ai 能力用的很多， 到处都在用
5. 切面很多，各种个样的通用能力：知识图谱， 作业， 练习记录， 管控， 轨迹， 香蕉激励， ai语音
6. 特定项目： 比如拍照批改， 推荐系统等， 不止需要一个rpc接口，还需要数据评测，评估结果的准确性，用户推荐的准确性等。 
      需要进行数据分析优化，有一套结果反馈与闭环系统(或者日志埋点等)。


### 学习机团队的问题：
1. 团队协作问题
2. 需求流程问题

### 缺少mock系统
在测试/线上测试困难， 依赖三方数据难以获取， 复杂时考虑


### 架构设计的思考
1. 当前作业与
视频课： 1个功能， 3个入口；     学情诊断： 使用沉浸式拍批时，    练习记录是一种基础， 上面架构了业务。  学情诊断加错题本时，虽然拍的是ai每日练，但是要展示为学情诊断


视频课作业， 作业关联的是某一个具体的作业 / 关联的目录页， 目录页看视频就算完成， 两种方式，不能在目录页里也带上exerciseRecordId。


### 流程控制
流程控制： 在所有的业务系统中， 都有一套流程控制系统。 比如订单系统中。  订单就是承载整个流程的基础数据。 这个流程或者是显示，或者是隐式的。都存在。
在作业中， 承载整个流程的基础数据就是练习记录。
